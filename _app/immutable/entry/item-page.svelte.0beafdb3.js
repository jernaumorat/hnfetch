import{S as un,i as dn,s as fn,e as at,b as ye,H as Oe,h as N,o as mn,k as V,q as ae,a as ve,l as q,m as $,r as ce,c as _e,n as L,D as I,K as se,u as Se,L as hn}from"../chunks/index.fcb6eb8a.js";var gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ne={},pn={get exports(){return Ne},set exports(E){Ne=E}};(function(E,m){(function(d,p){p(m)})(gn,function(d){var p,f=Object.defineProperty,y=Object.defineProperties,_=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,Q=Math.pow,ne=(e,t,n)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F=(e,t)=>{for(var n in t||(t={}))P.call(t,n)&&ne(e,n,t[n]);if(x)for(var n of x(t))R.call(t,n)&&ne(e,n,t[n]);return e},M=(e,t)=>y(e,_(t)),re=(e,t)=>{var n={};for(var r in e)P.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&x)for(var r of x(e))t.indexOf(r)<0&&R.call(e,r)&&(n[r]=e[r]);return n},v=(e,t,n)=>new Promise((r,i)=>{var l=a=>{try{s(n.next(a))}catch(c){i(c)}},o=a=>{try{s(n.throw(a))}catch(c){i(c)}},s=a=>a.done?r(a.value):Promise.resolve(a.value).then(l,o);s((n=n.apply(e,t)).next())});function K(e,t){return e[13]=1,e[14]=t>>8,e[15]=t&255,e[16]=t>>8,e[17]=t&255,e}const C="p".charCodeAt(0),D="H".charCodeAt(0),W="Y".charCodeAt(0),G="s".charCodeAt(0);let O;function Z(){const e=new Int32Array(256);for(let t=0;t<256;t++){let n=t;for(let r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e}function ee(e){let t=-1;O||(O=Z());for(let n=0;n<e.length;n++)t=O[(t^e[n])&255]^t>>>8;return t^-1}function oe(e){const t=e.length-1;for(let n=t;n>=4;n--)if(e[n-4]===9&&e[n-3]===C&&e[n-2]===D&&e[n-1]===W&&e[n]===G)return n-3;return 0}function ie(e,t,n=!1){const r=new Uint8Array(13);t*=39.3701,r[0]=C,r[1]=D,r[2]=W,r[3]=G,r[4]=t>>>24,r[5]=t>>>16,r[6]=t>>>8,r[7]=t&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const i=ee(r),l=new Uint8Array(4);if(l[0]=i>>>24,l[1]=i>>>16,l[2]=i>>>8,l[3]=i&255,n){const o=oe(e);return e.set(r,o),e.set(l,o+13),e}else{const o=new Uint8Array(4);o[0]=0,o[1]=0,o[2]=0,o[3]=9;const s=new Uint8Array(54);return s.set(e,0),s.set(o,33),s.set(r,37),s.set(l,50),s}}const A="AAlwSFlz",z="AAAJcEhZ",te="AAAACXBI";function ue(e){let t=e.indexOf(A);return t===-1&&(t=e.indexOf(z)),t===-1&&(t=e.indexOf(te)),t}const de="[modern-screenshot]",X=typeof window<"u",Ee=X&&"Worker"in window,Ce=X&&"atob"in window,Te=X&&"btoa"in window,fe=X?(p=window.navigator)==null?void 0:p.userAgent:"",we=fe.includes("Chrome"),me=fe.includes("AppleWebKit")&&!we,je=fe.includes("Firefox"),ct=e=>e&&"__CONTEXT__"in e,ut=e=>e.constructor.name==="CSSFontFaceRule",dt=e=>e.constructor.name==="CSSImportRule",Y=e=>e.nodeType===1,be=e=>typeof e.className=="object",Be=e=>be(e)&&e.tagName==="IMAGE",Pe=e=>Y(e)&&typeof e.style<"u"&&!be(e),ft=e=>e.nodeType===8,mt=e=>e.nodeType===3,he=e=>e.tagName==="IMG",ke=e=>e.tagName==="VIDEO",ht=e=>e.tagName==="CANVAS",Re=e=>e.tagName==="TEXTAREA",gt=e=>e.tagName==="INPUT",pt=e=>e.tagName==="STYLE",yt=e=>e.tagName==="SCRIPT",wt=e=>e.tagName==="SELECT",bt=e=>e.tagName==="SLOT",vt=e=>e.tagName==="IFRAME",j=(...e)=>console.warn(de,...e),_t=e=>console.time(`${de} ${e}`),St=e=>console.timeEnd(`${de} ${e}`),Et=e=>{var t;const n=(t=e==null?void 0:e.createElement)==null?void 0:t.call(e,"canvas");return n&&(n.height=n.width=1),n&&"toDataURL"in n&&!!n.toDataURL("image/webp").includes("image/webp")},Fe=e=>e.startsWith("data:");function Me(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(X&&e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i)||!X)return e;const n=Ae().implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}function Ae(e){var t;return(t=e&&Y(e)?e==null?void 0:e.ownerDocument:e)!=null?t:window.document}function We(e,t,n){const r=Ae(n).createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttributeNS(null,"width",e.toString()),r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"viewBox",`0 0 ${e} ${t}`),r}function Ve(e){const t=new XMLSerializer().serializeToString(e).replace(/[\u0000-\u0008\u000B\u000C\u000E-\u001F\uD800-\uDFFF\uFFFE\uFFFF]/ug,"");return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t)}`}function Ct(e,t="image/png",n=1){return v(this,null,function*(){try{return yield new Promise((r,i)=>{e.toBlob(l=>{l?r(l):i(new Error("Blob is null"))},t,n)})}catch(r){if(Ce)return j("Failed canvas to blob",{type:t,quality:n},r),Tt(e.toDataURL(t,n));throw r}})}function Tt(e){var t,n;const[r,i]=e.split(","),l=(n=(t=r.match(/data:(.+);/))==null?void 0:t[1])!=null?n:void 0,o=window.atob(i),s=o.length,a=new Uint8Array(s);for(let c=0;c<s;c+=1)a[c]=o.charCodeAt(c);return new Blob([a],{type:l})}function qe(e,t){return new Promise((n,r)=>{const i=new FileReader;i.onload=()=>n(i.result),i.onerror=()=>r(i.error),i.onabort=()=>r(new Error(`Failed read blob to ${t}`)),t==="dataUrl"?i.readAsDataURL(e):t==="arrayBuffer"&&i.readAsArrayBuffer(e)})}const kt=e=>qe(e,"dataUrl"),At=e=>qe(e,"arrayBuffer");function le(e,t){const n=Ae(t).createElement("img");return n.decoding="sync",n.loading="eager",n.src=e,n}function ge(e,t){return new Promise(n=>{const{timeout:r,ownerDocument:i,onError:l}=t??{},o=typeof e=="string"?le(e,Ae(i)):e;let s=null,a=null;function c(){n(o),s&&clearTimeout(s),a==null||a()}if(r&&(s=setTimeout(c,r)),ke(o)){const u=o.currentSrc||o.src;if(!u)return o.poster?ge(o.poster,t).then(n):c();if(o.readyState>=2)return c();const h=c,g=w=>{j("Failed video load",u,w),l==null||l(w),c()};a=()=>{o.removeEventListener("loadeddata",h),o.removeEventListener("error",g)},o.addEventListener("loadeddata",h,{once:!0}),o.addEventListener("error",g,{once:!0})}else{const u=Be(o)?o.href.baseVal:o.currentSrc||o.src;if(!u)return c();const h=()=>v(this,null,function*(){if(he(o)&&"decode"in o)try{yield o.decode()}catch(w){j("Failed to decode image, trying to render anyway",o.dataset.originalSrc||u,w)}c()}),g=w=>{j("Failed image load",o.dataset.originalSrc||u,w),c()};if(he(o)&&o.complete)return h();a=()=>{o.removeEventListener("load",h),o.removeEventListener("error",g)},o.addEventListener("load",h,{once:!0}),o.addEventListener("error",g,{once:!0})}})}function $e(e,t){return v(this,null,function*(){Pe(e)&&(he(e)||ke(e)?yield ge(e,{timeout:t}):yield Promise.all(["img","video"].flatMap(n=>Array.from(e.querySelectorAll(n)).map(r=>ge(r,{timeout:t})))))})}const ze=function(){let e=0;const t=()=>`0000${(Math.random()*Q(36,4)<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)}();function xt(e){return{time:t=>e&&_t(t),timeEnd:t=>e&&St(t),warn:(...t)=>e&&j(...t)}}function It(e){return{cache:e?"no-cache":"force-cache"}}function J(e,t){return v(this,null,function*(){return ct(e)?e:He(e,M(F({},t),{autoDestruct:!0}))})}function He(e,t){return v(this,null,function*(){var n,r,i,l;const{scale:o=1,workerUrl:s,workerNumber:a=1}=t||{},c=!!(t!=null&&t.debug),u=(n=e.ownerDocument)!=null?n:X?window.document:void 0,h=(i=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?i:X?window:void 0,g=new Map,w=M(F({width:0,height:0,quality:1,type:"image/png",scale:o,backgroundColor:null,style:null,filter:null,maximumCanvasSize:0,timeout:3e4,progress:null,debug:c,fetch:F({requestInit:It((l=t==null?void 0:t.fetch)==null?void 0:l.bypassingCache),placeholderImage:"data:image/png;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",bypassingCache:!1},t==null?void 0:t.fetch),font:{},drawImageInterval:100,workerUrl:null,workerNumber:a,onCloneNode:null,onEmbedNode:null,onCreateForeignObjectSvg:null,autoDestruct:!1},t),{__CONTEXT__:!0,log:xt(c),node:e,ownerDocument:u,ownerWindow:h,dpi:o===1?null:96*o,svgStyleElement:Ge(u),svgStyles:new Map,defaultComputedStyles:new Map,workers:[...new Array(Ee&&s&&a?a:0)].map(()=>{const S=new Worker(s);return S.onmessage=U=>v(this,null,function*(){var T,k,H,De;const{url:Le,result:st}=U.data;st?(k=(T=g.get(Le))==null?void 0:T.resovle)==null||k.call(T,st):(De=(H=g.get(Le))==null?void 0:H.reject)==null||De.call(H,new Error(`Error receiving message from worker: ${Le}`))}),S.onmessageerror=U=>{var T,k;const{url:H}=U.data;(k=(T=g.get(H))==null?void 0:T.reject)==null||k.call(T,new Error(`Error receiving message from worker: ${H}`))},S}),fontFamilies:new Set,fontCssTexts:new Map,acceptOfImage:`${[Et(u)&&"image/webp","image/svg+xml","image/*","*/*"].filter(Boolean).join(",")};q=0.8`,requests:g,drawImageCount:0,tasks:[]});w.log.time("wait until load"),yield $e(e,w.timeout),w.log.timeEnd("wait until load");const{width:b,height:B}=Dt(e,w);return w.width=b,w.height=B,w})}function Ge(e){if(!e)return;const t=e.createElement("style"),n=t.ownerDocument.createTextNode(`
.______background-clip--text {
  background-clip: text;
  -webkit-background-clip: text;
}
`);return t.appendChild(n),t}function Dt(e,t){let{width:n,height:r}=t;if(Y(e)&&(!n||!r)){const i=e.getBoundingClientRect();n=n||i.width||Number(e.getAttribute("width"))||0,r=r||i.height||Number(e.getAttribute("height"))||0}return{width:n,height:r}}function Nt(e,t){return v(this,null,function*(){const{log:n,timeout:r,drawImageCount:i,drawImageInterval:l}=t;n.time("image to canvas");const o=yield ge(e,{timeout:r}),{canvas:s,context2d:a}=Pt(e.ownerDocument,t),c=()=>{try{a==null||a.drawImage(o,0,0,s.width,s.height)}catch(u){j("Failed to drawImage",u)}};c();for(let u=0;u<i;u++)yield new Promise(h=>{setTimeout(()=>{c(),h()},u+l)});return t.drawImageCount=0,n.timeEnd("image to canvas"),s})}function Pt(e,t){const{width:n,height:r,scale:i,backgroundColor:l,maximumCanvasSize:o}=t,s=e.createElement("canvas");s.width=Math.floor(n*i),s.height=Math.floor(r*i),s.style.width=`${n}px`,s.style.height=`${r}px`,o&&(s.width>o||s.height>o)&&(s.width>o&&s.height>o?s.width>s.height?(s.height*=o/s.width,s.width=o):(s.width*=o/s.height,s.height=o):s.width>o?(s.height*=o/s.width,s.width=o):(s.width*=o/s.height,s.height=o));const a=s.getContext("2d");return a&&l&&(a.fillStyle=l,a.fillRect(0,0,s.width,s.height)),{canvas:s,context2d:a}}function Ze(e,t,n){var r;e=e.toLowerCase();const{defaultComputedStyles:i,ownerDocument:l}=n,o=`${e}${t??""}`;if(i.has(o))return i.get(o);let s=n.sandbox;if(s||l&&(s=l.createElement("iframe"),s.id=`__SANDBOX__-${ze()}`,s.width="0",s.height="0",s.style.visibility="hidden",s.style.position="fixed",l.body.appendChild(s),(r=s.contentWindow)==null||r.document.write('<!DOCTYPE html><meta charset="UTF-8"><title></title><body>'),n.sandbox=s),!s)return{};const a=s.contentWindow;if(!a)return{};const c=a.document,u=c.createElement(e);c.body.appendChild(u),u.textContent=" ";const h=a.getComputedStyle(u,t),g={};for(let w=h.length-1;w>=0;w--){const b=h.item(w);b==="width"||b==="height"?g[b]="auto":g[b]=h.getPropertyValue(b)}return c.body.removeChild(u),i.set(o,g),g}const Ft=["content","-webkit-locale","-webkit-text-fill-color"],Ut=[":before",":after"],Lt=[":-webkit-scrollbar",":-webkit-scrollbar-button",":-webkit-scrollbar-thumb",":-webkit-scrollbar-track",":-webkit-scrollbar-track-piece",":-webkit-scrollbar-corner",":-webkit-resizer"];function Ot(e,t,n,r){const{ownerWindow:i,svgStyleElement:l,svgStyles:o}=r;if(!l||!i)return;function s(c){const u=i.getComputedStyle(e,c),h=u.getPropertyValue("content");if(!h||h==="none")return;const g=[ze()],w=Ze(e.nodeName,c,r),b=[`content: '${h.replace(/'|"/g,"")}';`];for(let U=u.length-1;U>=0;U--){const T=u.item(U);if(Ft.includes(T))continue;const k=u.getPropertyValue(T),H=u.getPropertyPriority(T);T==="background-clip"&&k==="text"&&g.push(" ______background-clip--text"),!(w[T]===k&&!H)&&b.push(`${T}: ${k}${H?" !important":""};`)}if(b.length===1)return;try{n.className=[n.className,...g].join(" ")}catch{return}const B=b.join(`
  `);let S=o.get(B);S||(S=[],o.set(B,S)),S.push(`.${g[0]}:${c}`)}Ut.forEach(s);const a=t.overflow;(a.includes("scroll")||(a.includes("auto")||a.includes("overlay"))&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth))&&Lt.forEach(s)}function jt(e,t){Re(e)&&(t.innerHTML=e.value),(Re(e)||gt(e)||wt(e))&&(t.value=e.value)}const Bt=["transitionProperty","all","d","content","-webkit-text-fill-color"];function Rt(e,t,n,r,i){const l=n.style,o=Ze(e.nodeName,null,i);l.transitionProperty="none";for(let s=t.length-1;s>=0;s--){const a=t.item(s);if(Bt.includes(a))continue;const c=t.getPropertyValue(a),u=t.getPropertyPriority(a);if(r&&a.startsWith("margin")&&c){l.setProperty(a,"0",u);continue}if(a==="background-clip"&&c==="text"&&n.classList.add("______background-clip--text"),!(o[a]===c&&!e.getAttribute(a)&&!u)&&(l.setProperty(a,c,u),a.startsWith("border")&&a.endsWith("style"))){const h=a.replace("style","width");l.getPropertyValue(h)||l.setProperty(h,"0")}}we&&(l.fontKerning==="auto"&&(l.fontKerning="normal"),l.overflow==="hidden"&&l.textOverflow==="ellipsis"&&e.scrollWidth===e.clientWidth&&(l.textOverflow="clip"))}function Mt(e,t){var n;try{if((n=e==null?void 0:e.contentDocument)!=null&&n.body)return Ue(e.contentDocument.body,t)}catch(r){j("Failed to clone iframe",r)}return e.cloneNode(!1)}function Xe(e){if(e.ownerDocument)try{const i=e.toDataURL();if(i!=="data:,")return le(i,e.ownerDocument)}catch{}const t=e.cloneNode(!1),n=e.getContext("2d"),r=t.getContext("2d");try{return n&&r&&r.putImageData(n.getImageData(0,0,e.width,e.height),0,0),t}catch(i){j("Failed to clone canvas",i)}return t}function Wt(e){return v(this,null,function*(){if(e.ownerDocument&&!e.currentSrc&&e.poster)return le(e.poster,e.ownerDocument);const t=e.cloneNode(!1);t.crossOrigin="anonymous",e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc);const n=t.ownerDocument;if(n){let r=!0;if(yield ge(t,{onError:()=>r=!1}),!r)return e.poster?le(e.poster,e.ownerDocument):t;t.currentTime=e.currentTime,yield new Promise(l=>{t.addEventListener("seeked",l,{once:!0})});const i=n.createElement("canvas");i.width=e.offsetWidth,i.height=e.offsetHeight;try{const l=i.getContext("2d");l&&l.drawImage(t,0,0,i.width,i.height)}catch(l){return j("Failed to clone video",l),e.poster?le(e.poster,e.ownerDocument):t}return Xe(i)}return t})}function Vt(e){const t=e.cloneNode(!1);return e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager"),t}function qt(e,t){return ht(e)?Xe(e):vt(e)?Mt(e,t):he(e)?Vt(e):ke(e)?Wt(e):e.cloneNode(!1)}function Ke(e,t,n){return v(this,null,function*(){Y(t)&&(pt(t)||yt(t))||n.filter&&!n.filter(t)||e.appendChild(yield Ue(t,n))})}function Ye(e,t,n){return v(this,null,function*(){var r,i;const l=(i=Y(e)?(r=e.shadowRoot)==null?void 0:r.firstChild:void 0)!=null?i:e.firstChild;for(let o=l;o;o=o.nextSibling)if(!ft(o))if(Y(o)&&bt(o)&&typeof o.assignedNodes=="function"){const s=o.assignedNodes();for(let a=0;a<s.length;a++)yield Ke(t,s[a],n)}else yield Ke(t,o,n)})}function $t(e,t){const{backgroundColor:n,width:r,height:i,style:l}=t;if(n&&(e.backgroundColor=n),r&&(e.width=`${r}px`),i&&(e.height=`${i}px`),l)for(const o in l)e[o]=l[o]}function Ue(e,t,n=!1){return v(this,null,function*(){const{ownerDocument:r,ownerWindow:i,fontFamilies:l}=t;if(r&&mt(e))return r.createTextNode(e.data);if(r&&i&&Y(e)&&(Pe(e)||be(e))){const s=i.getComputedStyle(e);if(s.display==="none")return r.createComment(e.tagName.toLowerCase());const a=yield qt(e,t),c=a.style;return Rt(e,s,a,n,t),n&&$t(c,t),Ot(e,s,a,t),jt(e,a),c.getPropertyValue("font-family").split(",").filter(Boolean).map(u=>u.toLowerCase()).forEach(u=>l.add(u)),ke(e)||(yield Ye(e,a,t)),a}const o=e.cloneNode(!1);return yield Ye(e,o,t),o})}function Je(e){if(e.ownerDocument=void 0,e.ownerWindow=void 0,e.svgStyleElement=void 0,e.svgStyles.clear(),e.defaultComputedStyles.clear(),e.sandbox){try{e.sandbox.remove()}catch{}e.sandbox=void 0}e.workers=[],e.fontFamilies.clear(),e.fontCssTexts.clear(),e.requests.clear(),e.tasks=[]}function zt(e){const t=e,{url:n,timeout:r,responseType:i}=t,l=re(t,["url","timeout","responseType"]),o=new AbortController,s=r?setTimeout(()=>o.abort(),r):void 0;return fetch(n,F({signal:o.signal},l)).then(a=>{if(!a.ok)throw new Error("Failed fetch, not 2xx response",{cause:a});switch(i){case"dataUrl":return a.blob().then(kt);case"text":default:return a.text()}}).finally(()=>clearTimeout(s))}function xe(e,t){const{url:n,requestType:r="text",responseType:i="text",imageDom:l}=t;let o=n;const{timeout:s,acceptOfImage:a,requests:c,fetch:{requestInit:u,bypassingCache:h,placeholderImage:g},workers:w}=e;let b;if(c.has(n))b=c.get(n);else{h&&(o+=(/\?/.test(o)?"&":"?")+new Date().getTime()),r==="image"&&me&&e.drawImageCount++;const B=F({url:o,timeout:s,responseType:i,headers:r==="image"?{accept:a}:void 0},u);b={type:r,resovle:void 0,reject:void 0,response:null},b.response=(n.startsWith("http")&&w.length?new Promise((S,U)=>{w[c.size&w.length-1].postMessage(F({rawUrl:n},B)),b.resovle=S,b.reject=U}):zt(B)).catch(S=>{if(c.delete(n),r==="image"&&g)return j("Failed to fetch image base64, trying to use placeholder image",o),typeof g=="string"?g:g(l);throw S}),c.set(n,b)}return b.response}function Qe(e,t,n,r){return v(this,null,function*(){if(!et(e))return e;for(const[i,l]of Ht(e,t))try{const o=yield xe(n,{url:l,requestType:r?"image":"text",responseType:"dataUrl"});e=e.replace(Gt(i),`$1${o}$3`)}catch(o){j("Failed to fetch css data url",i,o)}return e})}function et(e){return/url\((['"]?)([^'"]+?)\1\)/.test(e)}const tt=/url\((['"]?)([^'"]+?)\1\)/g;function Ht(e,t){const n=[];return e.replace(tt,(r,i,l)=>(n.push([l,Me(l,t)]),r)),n.filter(([r])=>!Fe(r))}function Gt(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Zt(e,t){return v(this,null,function*(){const{ownerDocument:n,svgStyleElement:r,fontFamilies:i,fontCssTexts:l,tasks:o,font:s}=t;if(!(!n||!r||!i.size))if(s&&s.cssText){const a=rt(s.cssText,t);r.appendChild(n.createTextNode(`${a}
`))}else{const a=Array.from(n.styleSheets).filter(c=>{try{return"cssRules"in c&&!!c.cssRules.length}catch(u){return j(`Error while reading CSS rules from ${c.href}`,u),!1}});yield Promise.all(a.flatMap(c=>Array.from(c.cssRules).map((u,h)=>v(this,null,function*(){if(dt(u)){let g=h+1;const w=u.href;let b="";try{b=yield xe(t,{url:w,requestType:"text",responseType:"text"})}catch(S){j(`Error fetch remote css import from ${w}`,S)}const B=b.replace(tt,(S,U,T)=>S.replace(T,Me(T,w)));for(const S of Kt(B))try{c.insertRule(S,S.startsWith("@import")?g+=1:c.cssRules.length)}catch(U){j("Error inserting rule from remote css import",{rule:S,error:U})}}})))),a.flatMap(c=>Array.from(c.cssRules)).filter(c=>ut(c)&&et(c.style.getPropertyValue("src"))&&c.style.getPropertyValue("font-family").split(",").filter(Boolean).map(u=>u.toLowerCase()).some(u=>i.has(u))).forEach(c=>{const u=c,h=l.get(u.cssText);h?r.appendChild(n.createTextNode(`${h}
`)):o.push(Qe(u.cssText,u.parentStyleSheet?u.parentStyleSheet.href:null,t).then(g=>{g=rt(g,t),l.set(u.cssText,g),r.appendChild(n.createTextNode(`${g}
`))}))})}})}const Xt=/(\/\*[\s\S]*?\*\/)/gi,nt=/((@.*?keyframes [\s\S]*?){([\s\S]*?}\s*?)})/gi;function Kt(e){if(e==null)return[];const t=[];let n=e.replace(Xt,"");for(;;){const l=nt.exec(n);if(!l)break;t.push(l[0])}n=n.replace(nt,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let l=r.exec(n);if(l)i.lastIndex=r.lastIndex;else if(l=i.exec(n),l)r.lastIndex=i.lastIndex;else break;t.push(l[0])}return t}const Yt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Jt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function rt(e,t){const{font:n}=t,r=n?n==null?void 0:n.preferredFormat:void 0;return r?e.replace(Jt,i=>{for(;;){const[l,,o]=Yt.exec(i)||[];if(!o)return"";if(o===r)return`src: ${l};`}}):e}function Qt(e,t){if(he(e)){const n=e.currentSrc||e.src;if(!Fe(n))return[xe(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(r=>{r&&(e.srcset="",e.dataset.originalSrc=n,e.src=r||"")})];(me||je)&&n.includes("data:image/svg+xml")&&t.drawImageCount++}else if(be(e)&&!Fe(e.href.baseVal)){const n=e.href.baseVal;return[xe(t,{url:n,imageDom:e,requestType:"image",responseType:"dataUrl"}).then(r=>{r&&(e.dataset.originalSrc=n,e.href.baseVal=r||"")})]}return[]}const en=["background-image","border-image-source","-webkit-border-image","-webkit-mask-image","list-style-image"];function tn(e,t){return en.map(n=>{const r=e.getPropertyValue(n);return r?((me||je)&&r.includes("data:image/svg+xml")&&t.drawImageCount++,Qe(r,null,t,!0).then(i=>{!i||r===i||e.setProperty(n,i,e.getPropertyPriority(n))})):null}).filter(Boolean)}function ot(e,t){const{tasks:n}=t;Y(e)&&(he(e)||Be(e))&&n.push(...Qt(e,t)),Pe(e)&&n.push(...tn(e.style,t)),e.childNodes.forEach(r=>{ot(r,t)})}function it(e,t){return v(this,null,function*(){const n=yield J(e,t);if(Y(n.node)&&be(n.node))return n.node;const{ownerDocument:r,log:i,tasks:l,svgStyleElement:o,svgStyles:s,font:a,progress:c,autoDestruct:u,onCloneNode:h,onEmbedNode:g,onCreateForeignObjectSvg:w}=n;i.time("clone node");const b=yield Ue(n.node,n,!0);if(o&&r){let k="";s.forEach((H,De)=>{k+=`${H.join(`,
`)} {
  ${De}
}
`}),o.appendChild(r.createTextNode(k))}i.timeEnd("clone node"),h==null||h(b),a!==!1&&Y(b)&&(i.time("embed web font"),yield Zt(b,n),i.timeEnd("embed web font")),i.time("embed node"),ot(b,n);const B=l.length;let S=0;const U=()=>v(this,null,function*(){for(;;){const k=l.pop();if(!k)break;try{yield k}catch(H){j("Failed to run task",H)}c==null||c(++S,B)}});c==null||c(S,B),yield Promise.all([...Array(4)].map(U)),i.timeEnd("embed node"),g==null||g(b);const T=nn(b,n);return o&&T.insertBefore(o,T.children[0]),u&&Je(n),w==null||w(T),T})}function nn(e,t){const{width:n,height:r}=t,i=We(n,r,e.ownerDocument),l=i.ownerDocument.createElementNS(i.namespaceURI,"foreignObject");return l.setAttributeNS(null,"x","0%"),l.setAttributeNS(null,"y","0%"),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.append(e),i.appendChild(l),i}function Ie(e,t){return v(this,null,function*(){const n=yield J(e,t),r=yield it(n),i=Ve(r);n.autoDestruct||(n.svgStyleElement=Ge(n.ownerDocument));const l=le(i,r.ownerDocument);return yield Nt(l,n)})}function rn(e,t){return v(this,null,function*(){const n=yield J(e,t),{log:r,type:i,quality:l,dpi:o}=n,s=yield Ie(n);r.time("canvas to blob");const a=yield Ct(s,i,l);if(["image/png","image/jpeg"].includes(i)&&o){const c=yield At(a.slice(0,33));let u=new Uint8Array(c);return i==="image/png"?u=ie(u,o):i==="image/jpeg"&&(u=K(u,o)),new Blob([u,a.slice(33)],{type:i})}return r.timeEnd("canvas to blob"),a})}function pe(e,t){return v(this,null,function*(){const n=yield J(e,t),{log:r,quality:i,type:l,dpi:o}=n,s=yield Ie(n);r.time("canvas to data url");let a=s.toDataURL(l,i);if(["image/png","image/jpeg"].includes(l)&&o&&Ce&&Te){const[c,u]=a.split(",");let h=0,g=!1;if(l==="image/png"){const k=ue(u);k>=0?(h=Math.ceil((k+28)/3)*4,g=!0):h=33/3*4}else l==="image/jpeg"&&(h=18/3*4);const w=u.substring(0,h),b=u.substring(h),B=window.atob(w),S=new Uint8Array(B.length);for(let k=0;k<S.length;k++)S[k]=B.charCodeAt(k);const U=l==="image/png"?ie(S,o,g):K(S,o),T=window.btoa(String.fromCharCode(...U));a=[c,",",T,b].join("")}return r.timeEnd("canvas to data url"),a})}function lt(e,t){return v(this,null,function*(){const n=yield J(e,t),{width:r,height:i,ownerDocument:l}=n,o=yield pe(n),s=We(r,i,l),a=s.ownerDocument.createElementNS(s.namespaceURI,"image");return a.setAttributeNS(null,"href",o),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"width","100%"),s.appendChild(a),Ve(s)})}function on(e,t){return v(this,null,function*(){const n=yield J(e,t),{ownerDocument:r,width:i,height:l,scale:o,type:s}=n,a=s==="image/svg+xml"?yield lt(n):yield pe(n),c=le(a,r);return c.width=Math.floor(i*o),c.height=Math.floor(l*o),c.style.width=`${i}px`,c.style.height=`${l}px`,c})}function ln(e,t){return v(this,null,function*(){return pe(yield J(e,M(F({},t),{type:"image/jpeg"})))})}function sn(e,t){return v(this,null,function*(){const n=yield J(e,t),r=yield Ie(n);return r.getContext("2d").getImageData(0,0,r.width,r.height).data})}function an(e,t){return v(this,null,function*(){return pe(yield J(e,M(F({},t),{type:"image/png"})))})}function cn(e,t){return v(this,null,function*(){return pe(yield J(e,M(F({},t),{type:"image/webp"})))})}d.createContext=He,d.destroyContext=Je,d.domToBlob=rn,d.domToCanvas=Ie,d.domToDataUrl=pe,d.domToForeignObjectSvg=it,d.domToImage=on,d.domToJpeg=ln,d.domToPixel=sn,d.domToPng=an,d.domToSvg=lt,d.domToWebp=cn,d.loadMedia=ge,d.waitUntilLoad=$e,Object.defineProperty(d,Symbol.toStringTag,{value:"Module"})})})(pn,Ne);function yn(E){let m,d,p,f,y=E[0].by+"",_,x,P,R=E[5][E[4]].format(parseInt(E[0].time??"0")*1e3)+"",Q,ne,F,M,re=E[0].text+"",v,K,C,D=E[0].story+"",W,G,O,Z,ee,oe,ie;return{c(){m=V("div"),d=V("div"),p=V("div"),f=V("span"),_=ae(y),x=ve(),P=V("span"),Q=ae(R),ne=ve(),F=V("div"),M=V("p"),v=ve(),K=V("div"),C=V("span"),W=ae(D),G=ve(),O=V("div"),Z=V("button"),ee=ae("Save Image"),this.h()},l(A){m=q(A,"DIV",{id:!0,class:!0});var z=$(m);d=q(z,"DIV",{class:!0});var te=$(d);p=q(te,"DIV",{class:!0});var ue=$(p);f=q(ue,"SPAN",{class:!0});var de=$(f);_=ce(de,y),de.forEach(N),x=_e(ue),P=q(ue,"SPAN",{class:!0});var X=$(P);Q=ce(X,R),X.forEach(N),ue.forEach(N),ne=_e(te),F=q(te,"DIV",{class:!0});var Ee=$(F);M=q(Ee,"P",{class:!0});var Ce=$(M);Ce.forEach(N),Ee.forEach(N),v=_e(te),K=q(te,"DIV",{class:!0});var Te=$(K);C=q(Te,"SPAN",{class:!0});var fe=$(C);W=ce(fe,D),fe.forEach(N),Te.forEach(N),te.forEach(N),z.forEach(N),G=_e(A),O=q(A,"DIV",{class:!0});var we=$(O);Z=q(we,"BUTTON",{class:!0});var me=$(Z);ee=ce(me,"Save Image"),me.forEach(N),we.forEach(N),this.h()},h(){L(f,"class","link by svelte-10y9sv7"),L(P,"class","link date svelte-10y9sv7"),L(p,"class","item__header svelte-10y9sv7"),L(M,"class","item__body__text svelte-10y9sv7"),L(F,"class","item__body svelte-10y9sv7"),L(C,"class","link story svelte-10y9sv7"),L(K,"class","item__footer svelte-10y9sv7"),L(d,"class","item svelte-10y9sv7"),L(m,"id","bubble"),L(m,"class","svelte-10y9sv7"),L(Z,"class","svelte-10y9sv7"),L(O,"class","controls svelte-10y9sv7")},m(A,z){ye(A,m,z),I(m,d),I(d,p),I(p,f),I(f,_),I(p,x),I(p,P),I(P,Q),I(d,ne),I(d,F),I(F,M),M.innerHTML=re,I(d,v),I(d,K),I(K,C),I(C,W),ye(A,G,z),ye(A,O,z),I(O,Z),I(Z,ee),oe||(ie=[se(f,"click",E[7]),se(f,"keydown",E[8]),se(P,"click",E[9]),se(P,"keydown",E[10]),se(C,"click",E[11]),se(C,"keydown",E[12]),se(Z,"click",E[6])],oe=!0)},p(A,z){z&1&&y!==(y=A[0].by+"")&&Se(_,y),z&17&&R!==(R=A[5][A[4]].format(parseInt(A[0].time??"0")*1e3)+"")&&Se(Q,R),z&1&&re!==(re=A[0].text+"")&&(M.innerHTML=re),z&1&&D!==(D=A[0].story+"")&&Se(W,D)},d(A){A&&N(m),A&&N(G),A&&N(O),oe=!1,hn(ie)}}}function wn(E){let m,d,p,f,y;return{c(){m=V("span"),d=ae(E[2]),p=ve(),f=V("p"),y=ae(E[3]),this.h()},l(_){m=q(_,"SPAN",{id:!0,class:!0});var x=$(m);d=ce(x,E[2]),p=_e(x),f=q(x,"P",{class:!0});var P=$(f);y=ce(P,E[3]),P.forEach(N),x.forEach(N),this.h()},h(){L(f,"class","svelte-10y9sv7"),L(m,"id","error"),L(m,"class","svelte-10y9sv7")},m(_,x){ye(_,m,x),I(m,d),I(m,p),I(m,f),I(f,y)},p(_,x){x&4&&Se(d,_[2]),x&8&&Se(y,_[3])},d(_){_&&N(m)}}}function bn(E){let m,d;return{c(){m=V("span"),d=ae("loading..."),this.h()},l(p){m=q(p,"SPAN",{id:!0,class:!0});var f=$(m);d=ce(f,"loading..."),f.forEach(N),this.h()},h(){L(m,"id","loading"),L(m,"class","svelte-10y9sv7")},m(p,f){ye(p,m,f),I(m,d)},p:Oe,d(p){p&&N(m)}}}function vn(E){let m;function d(y,_){return y[1]?bn:y[2]?wn:yn}let p=d(E),f=p(E);return{c(){f.c(),m=at()},l(y){f.l(y),m=at()},m(y,_){f.m(y,_),ye(y,m,_)},p(y,[_]){p===(p=d(y))&&f?f.p(y,_):(f.d(1),f=p(y),f&&(f.c(),f.m(m.parentNode,m)))},i:Oe,o:Oe,d(y){f.d(y),y&&N(m)}}}function _n(E,m,d){let p={},f=!0,y=0,_="";const x=async C=>{const D=await fetch(`https://hacker-news.firebaseio.com/v0/item/${C}.json`),{type:W,parent:G,title:O}=await D.json();return W==="story"?[O,C]:x(G)},P=[new Intl.DateTimeFormat("en-US",{timeZone:"UTC"}),new Intl.DateTimeFormat("en-US",{dateStyle:"long",timeZone:"UTC"}),new Intl.DateTimeFormat("en-US",{dateStyle:"long",timeStyle:"short",timeZone:"UTC"}),new Intl.DateTimeFormat("en-GB",{timeZone:"UTC"}),new Intl.DateTimeFormat("en-GB",{dateStyle:"long",timeZone:"UTC"}),new Intl.DateTimeFormat("en-GB",{dateStyle:"long",timeStyle:"short",timeZone:"UTC"}),{format:C=>new Date(C).toUTCString()},{format:C=>new Date(C).toISOString()}];let R=0;const Q=()=>{const C=document.getElementById("bubble");if(!C){console.log("no bubble");return}const D=document.createElement("a");D.setAttribute("download",`hnfetch_${p.id}.png`),Ne.domToPng(C,{scale:2}).then(W=>{D.setAttribute("href",W),D.click()}),D.remove()};return mn(async()=>{const C=new URLSearchParams(window.location.search).get("id");if(!C){d(2,y=400),d(3,_="Bad request"),d(1,f=!1);return}const D=await fetch(`https://hacker-news.firebaseio.com/v0/item/${C}.json`);if(!D.ok){d(2,y=D.status),d(3,_=D.statusText),d(1,f=!1);return}const W=await D.json();if(!W){d(2,y=400),d(3,_="Item not found"),d(1,f=!1);return}const{type:G,time:O,by:Z,text:ee,parent:oe}=W;if(!ee){d(2,y=415),d(3,_="Item must have body text (comment or text post)"),d(1,f=!1);return}try{const[ie,A]=await x(oe);d(0,p={id:C,type:G,time:O,by:Z,text:ee,story:ie,storyId:A}),d(1,f=!1)}catch{d(2,y=415),d(3,_="Polls not supported"),d(1,f=!1);return}}),[p,f,y,_,R,P,Q,()=>window.open(`https://news.ycombinator.com/user?id=${p.by}`,"_blank"),()=>window.open(`https://news.ycombinator.com/user?id=${p.by}`,"_blank"),()=>d(4,R=(R+1)%P.length),()=>d(4,R=(R+1)%P.length),()=>window.open(`https://news.ycombinator.com/item?id=${p.id}`,"_blank"),()=>window.open(`https://news.ycombinator.com/item?id=${p.id}`,"_blank")]}class En extends un{constructor(m){super(),dn(this,m,_n,vn,fn,{})}}export{En as default};
